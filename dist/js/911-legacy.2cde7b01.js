(self["webpackJsonp_hoderSaas"]=self["webpackJsonp_hoderSaas"]||[]).push([[911],{23924:function(e,t,a){var i={"./Default.vue":60072};function n(e){var t=s(e);return a(t)}function s(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}n.keys=function(){return Object.keys(i)},n.resolve=s,e.exports=n,n.id=23924},54624:function(e,t,a){var i={"./Default.vue":49153};function n(e){var t=s(e);return a(t)}function s(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}n.keys=function(){return Object.keys(i)},n.resolve=s,e.exports=n,n.id=54624},60072:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return l}});var i=function(){var e=this,t=e._self._c;return t("div",[e._v("暂无对应的弹窗组件")])},n=[],s={},r=s,o=a(1001),c=(0,o.Z)(r,i,n,!1,null,null,null),l=c.exports},49153:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return l}});var i=function(){var e=this,t=e._self._c;return t("div",[e._v("暂无对应的页面组件")])},n=[],s={},r=s,o=a(1001),c=(0,o.Z)(r,i,n,!1,null,null,null),l=c.exports},39911:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return G}});var i=function(){var e=this,t=e._self._c;return t("c-pages-card",{ref:"pages",attrs:{"pages-config":e.pagesConfig}},[t("div",{attrs:{slot:"btn"},slot:"btn"},[t("el-button",{attrs:{plain:"",type:"primary"},on:{click:e.addRole}},[e._v("添加应用角色")])],1),e.dialogVisible?t("el-dialog",{attrs:{slot:"dialog",title:e.titleMap[e.pageType||"addRole"],visible:e.dialogVisible,width:"800px","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}},slot:"dialog"},[-1===["data","power"].indexOf(e.pageType)?t("add-role-form",{attrs:{"page-type":e.pageType,id:e.editId},on:{close:e.closeRole}}):e._e(),"data"===e.pageType?t("policy-data-tag",{attrs:{"product-id":e.productId,id:e.editId},on:{close:e.closeRole}}):e._e(),"power"===e.pageType?t("permission-policy",{attrs:{"product-id":e.productId,id:e.editId},on:{close:e.closeRole}}):e._e()],1):e._e()],1)},n=[],s=(a(41539),a(57658),a(38862),function(){var e=this,t=e._self._c;return t("div",{staticClass:"pages"},["list"===e.pageType||"Dialog"===e.pageType?t("div",[t("div",{staticClass:"pages-title"},[e.pagesData.formItems.length&&e.pagesData.operation.topOptions.length?t("div",{staticClass:"filter-box"},[t("el-button-group",{staticClass:"filter-btn"},e._l(e.pagesData.operation.topOptions,(function(a,i){return t("el-button",{key:"topOptions_".concat(i),attrs:{plain:"",type:"primary"},on:{click:function(t){return e.optionsTodo(a)}}},[e._v(" "+e._s(a[0])+" ")])})),1),e._l(e.pagesData.formItems,(function(a,i){return t("div",{key:"filter_".concat(i),staticClass:"filter-input"},[t("el-input",{attrs:{placeholder:a.placePrefix?a.placePrefix:"请输入内容"},model:{value:e.formData[a.key],callback:function(t){e.$set(e.formData,a.key,t)},expression:"formData[item.key]"}})],1)})),t("el-button-group",[t("el-button",{on:{click:e.handleSearch}},[e._v("查询")]),t("el-button",{on:{click:e.handleResetSearch}},[e._v("重置")])],1)],2):[t("div",{staticClass:"title-info"},[t("div",{staticClass:"title-name"},[e._v(e._s(e.pagesData.title))]),e.pagesData.Subtitle?t("div",{staticClass:"title-info"},[e._v(e._s(e.pagesData.Subtitle))]):e._e()]),t("div",{staticClass:"title-btn"},[e._t("btn")],2)],t("div",{staticStyle:{clear:"both"}})],2),t("div",{staticClass:"pages-table"},[t("c-table",{attrs:{props:e.pagesData.table.props,data:e.pagesData.table.data,header:e.pagesData.table.header}}),e.pagesData.pagesFlag?t("div",{staticClass:"pages-pagination"},[t("span",{staticClass:"pages-total"},[e._v("共"+e._s(e.pagesData.pagesTotal)+"条")]),t("el-pagination",{staticClass:"pagination",staticStyle:{float:"right"},attrs:{layout:"prev, pager, next, sizes, jumper","current-page":e.pagesData.pages.page,"page-size":e.pagesData.pages.pageSize,total:e.pagesData.pagesTotal},on:{"current-change":e.handleCurrentChange,"size-change":e.handleChangeSize}}),t("div",{staticStyle:{clear:"both"}})],1):e._e()],1),e._t("dialog")],2):e._e(),"Pages"===e.pageType?t("resource-content",{attrs:{template:e.template,title:e.title,mode:e.mode,id:e.id,row:e.row,"unique-id":e.uniqueId},on:{"upsert-end":function(t){return e.hiddenPages("ok")},"go-back":function(t){return e.hiddenPages("back")}}}):e._e(),e.dialogVisible?t("div",[t("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.hiddenDialog}},[t(e.dialogComponents[e.template]||e.dialogComponents["Default"],{ref:"dialogForm",tag:"component",attrs:{mode:e.mode,id:e.id,row:e.row,"unique-id":e.uniqueId},on:{"upsert-end":function(t){return e.hiddenDialog("ok")},"go-back":function(t){return e.hiddenDialog("back")}}})],1)],1):e._e()],1)}),r=[],o=a(3336),c=a(95082),l=(a(9653),a(92222),a(26699),a(54747),a(33948),a(74916),a(15306),a(23924)),u={};l.keys().forEach((function(e){u[e.replace(/(^\.\/|\.vue$)/g,"")]=l(e).default}));var d=u,p=function(){var e=this,t=e._self._c;return t("div",{staticClass:"box-card"},[t("el-card",{staticClass:"box-card",attrs:{shadow:"never","body-style":{height:"calc(100% - 50px)",padding:"0"}}},[t("div",{attrs:{slot:"header"},slot:"header"},[t("div",{staticClass:"pages-card--title"},[e._v(e._s(e.title))]),t("div",{staticClass:"pages-card--actions",on:{click:function(t){return e.$emit("go-back")}}},[t("span",{staticClass:"text"},[e._v("返回")])])]),t("div",{staticClass:"card-body"},[t("el-scrollbar",{staticStyle:{height:"100%"}},[t("div",{staticStyle:{padding:"14px 20px"}},[t(e.templateComponents[e.template]||e.templateComponents["Default"],{ref:"page",tag:"component",attrs:{mode:e.mode,id:e.id,row:e.row,"unique-id":e.uniqueId},on:{"upsert-end":function(t){return e.$emit("upsert-end")},"go-back":function(t){return e.$emit("go-back")}}})],1)])],1)])],1)},h=[],g=a(54624),f={};g.keys().forEach((function(e){f[e.replace(/(^\.\/|\.vue$)/g,"")]=g(e).default}));var m=f,v={data:function(){return{showIcon:!1,templateComponents:(0,c.Z)({},m)}},props:["title","template","mode","id","row","uniqueId"]},b=v,y=a(1001),C=(0,y.Z)(b,p,h,!1,null,"2f73ebb0",null),T=C.exports,_={name:"PagesCard",components:{ResourceContent:T},props:{pagesConfig:{type:Object,default:function(){return{}}},uniqueId:{type:[String,Number],default:""}},data:function(){return{dialogVisible:!1,template:"",mode:"",id:"",row:{},dialogComponents:d,title:"",pageType:"list",formData:{},pagesData:{pagesFlag:!0,formItems:[],operation:{topOptions:[]},title:"",Subtitle:"",pagesTotal:0,pages:{pageSize:10,page:1},table:{props:{border:!1},data:[]}}}},methods:{handleSearch:function(){this.pagesData.pages.page=1,this.getList()},handleResetSearch:function(){this.pagesData.pages.page=1,this.formData={},this.getList()},tabOptions:function(e){var t=e.row,a=e.option;"Dialog"===a[1]&&(this.dialogVisible=!0),this.pageType=a[1],this.title=a[0],this.template=a[2],this.mode=a[3],this.row=t},optionsTodo:function(e){"Dialog"===e[1]&&(this.dialogVisible=!0),this.pageType=e[1],this.title=e[0],this.template=e[2],this.mode=e[3]},hiddenDialog:function(e){this.dialogVisible=!1,this.pageType="list","ok"===e&&this.getList()},hiddenPages:function(e){this.pageType="list","ok"===e&&this.getList()},handleCurrentChange:function(e){this.pagesData.pages.page=e,this.getList()},handleChangeSize:function(e){this.pagesData.pages.pageSize=e,this.getList()},getList:function(){var e=this;this.pagesConfig.listApi&&this.pagesConfig.listApi((0,c.Z)((0,c.Z)((0,c.Z)({},this.pagesData.params),this.pagesData.pagesFlag?this.pagesData.pages:{}),this.formData)).then((function(t){var a=t.data;e.$set(e.pagesData.table,"data",e.pagesData.pagesFlag?a.list:e.pagesData.getData?e.pagesData.getData(a):a),e.pagesData.pagesTotal=a.total}))},deepMerge:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e=this.deepClone(e),"object"!==(0,o.Z)(e)||"object"!==(0,o.Z)(t))return!1;for(var a in t)t.hasOwnProperty(a)&&(a in e?"object"!==(0,o.Z)(e[a])||"object"!==(0,o.Z)(t[a])?e[a]=t[a]:e[a].concat&&t[a].concat?e[a]=e[a].concat(t[a]):e[a]=this.deepMerge(e[a],t[a]):e[a]=t[a]);return e},deepClone:function(e){if([null,void 0,NaN,!1].includes(e))return e;if("object"!==(0,o.Z)(e)&&"function"!==typeof e)return e;var t=this.array(e)?[]:{};for(var a in e)e.hasOwnProperty(a)&&(t[a]="object"===(0,o.Z)(e[a])?this.deepClone(e[a]):e[a]);return t},array:function(e){return"function"===typeof Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}},created:function(){this.pagesData=this.deepMerge(this.pagesData,this.pagesConfig),this.getList()}},D=_,S=(0,y.Z)(D,s,r,!1,null,"4597b27c",null),k=S.exports,P=a(60838),I=(a(68309),function(){var e=this,t=e._self._c;return t("div",[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.roleFormData,rules:e.roleRules,"label-width":"100px","label-position":"top"}},[t("el-form-item",{attrs:{label:"角色名称",prop:"policyName"}},[t("el-input",{model:{value:e.roleFormData.policyName,callback:function(t){e.$set(e.roleFormData,"policyName",t)},expression:"roleFormData.policyName"}})],1),t("el-form-item",{attrs:{label:"英文名称",prop:"policyEname"}},[t("el-input",{model:{value:e.roleFormData.policyEname,callback:function(t){e.$set(e.roleFormData,"policyEname",t)},expression:"roleFormData.policyEname"}})],1),t("el-form-item",{attrs:{label:"归属业务",prop:"businessUniqueIds"}},[t("el-checkbox-group",{model:{value:e.roleFormData.businessUniqueIds,callback:function(t){e.$set(e.roleFormData,"businessUniqueIds",t)},expression:"roleFormData.businessUniqueIds"}},e._l(e.businessList,(function(a,i){return t("el-checkbox",{key:i,attrs:{label:a.uniqueId}},[e._v(e._s(a.name))])})),1)],1),t("el-form-item",{attrs:{label:"备注"}},[t("el-input",{attrs:{type:"textarea",rows:"4"},model:{value:e.roleFormData.remark,callback:function(t){e.$set(e.roleFormData,"remark",t)},expression:"roleFormData.remark"}})],1),t("el-form-item",[t("div",{staticClass:"dialog-footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.submitRole}},[e._v("确 定")]),t("el-button",{on:{click:function(t){return e.$emit("close","cancel")}}},[e._v("取 消")])],1)])],1)],1)}),x=[],M=(a(77601),a(21703),a(99534)),L=function(e,t,a){var i=/^[A-Za-z0-9]+$/;!i.test(t)&&t?a(new Error("英文名称必须是数字或字母")):a()},w={mixins:[P.Z],components:{},props:{id:{type:[String,Number],default:""},pageType:{type:String,default:"addRole"},roleForm:{type:[Object],default:function(){return{}}}},data:function(){return{roleRules:{policyName:{required:!0,message:"请输入角色名称",trigger:["blur"]},policyEname:[{required:!0,message:"请输入英文",trigger:["blur"]},{min:4,max:20,message:"英文长度在 4 到 20 个字符",trigger:["blur"]},{validator:L,trigger:["blur"]}],businessUniqueIds:[{type:"array",required:!0,message:"请选择归属业务",trigger:"change"}]},roleFormData:{businessUniqueIds:[]},businessList:[]}},watch:{roleForm:{handler:function(e){console.log(e)},deep:!0}},methods:{submitRole:function(){var e=this;this.$refs.ruleForm.validate((function(t){if(t){var a=JSON.parse(JSON.stringify(e.roleFormData)),i=a.id?M.ul:M._d;i((0,c.Z)((0,c.Z)({},a),{},{policyCode:"".concat("hoderSaas","_").concat(e.roleFormData.policyEname),productUniqueId:e.uniqueId})).then((function(){e.$emit("close","save")}))}}))},evil:function(e){var t=Function;return new t("return "+e)()},getBusinessList:function(){var e=this;(0,M.Dz)({pageSize:99999,page:1}).then((function(t){e.businessList=t.data.list}))},getDetail:function(){var e=this;(0,M.s8)({id:this.id}).then((function(t){e.roleFormData=t.data,e.$nextTick((function(){e.$refs["ruleForm"].clearValidate()}))}))}},created:function(){},mounted:function(){this.getBusinessList(),this.id&&this.getDetail()}},F=w,Z=(0,y.Z)(F,I,x,!1,null,"53b107aa",null),E=Z.exports,N=function(){var e=this,t=e._self._c;return t("div",[t("el-row",{staticClass:"permission-box mb20"},[t("el-col",{staticClass:"item",attrs:{sm:24}},[t("div",{staticClass:"content"},[t("div",{staticClass:"tag-content"},[t("div",{staticClass:"box-head"},[t("span",{staticClass:"mr40"},[e._v("数据标签列表")]),t("span",[e._v("应用："+e._s(e.activeProduct.cname||"-"))])]),t("div",{staticClass:"content"},[t("el-tree",{ref:"tagTree",attrs:{data:e.activeProduct.dataTagList,"node-key":"id",props:e.dataTagTreeProps,"show-checkbox":!0,"default-expand-all":!0,"expand-on-click-node":!1,"check-strictly":e.isCheckStrictly,"default-checked-keys":e.selectedTagIds},on:{check:function(t){return e.tagSelect(t,e.activeProduct)}}})],1)])])])],1),t("div",{staticClass:"form-footer-btn",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("保存并返回")]),t("el-button",{on:{click:function(t){return e.$emit("close","cancel")}}},[e._v("取消")])],1)],1)},$=[],q=(a(21249),a(47042),{name:"PermissionPolicy",props:{id:{type:Number,default:0},productId:{type:[Number,String],default:0}},data:function(){return{isLoading:!1,productList:[],activeProduct:this.genActivedPorduct(),dataTagTreeProps:{label:"tagName",children:"child"},selectedTagIds:[],isCheckStrictly:!1}},computed:{},methods:{genActivedPorduct:function(){return{cname:"",dataTagList:[]}},getSelectedTags:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.forEach((function(t){var i=t[e.dataTagTreeProps.children];!t.selected||i&&0!==i.length||a.push(t),i&&e.getSelectedTags(i,a)})),a},handleProducClick:function(e){var t=e.dataTagList;this.activeProduct=e;var a=this.getSelectedTags(t);this.selectedTagIds=a.map((function(e){return e.id}))},subTagsSelect:function(e){var t=this,a=e.selected;(e[this.dataTagTreeProps.children]||[]).forEach((function(e){e.selected=a,t.subTagsSelect(e)}))},parentTagSelect:function(e){if(e._parentTag){var t=e._parentTag[this.dataTagTreeProps.children]||[],a=t.some((function(e){return e.selected}));e._parentTag.selected=Number(a),this.parentTagSelect(e._parentTag)}},tagSelect:function(e,t){var a=Number(!e.selected);e.selected=a;var i=t.dataTagList||[],n=this.getSelectedTags(i);n.length>0&&(t.selected=1),this.isCheckStrictly||this.subTagsSelect(e),this.parentTagSelect(e),this.selectedTagIds=this.$refs.tagTree.getCheckedKeys()},handleSave:function(){var e=this,t=this.productList.slice(0,this.productList.length);t.forEach((function(t){e.clearCacheParentTag(t.dataTagList)})),this.saveData({policyId:this.id,tagList:t})},saveData:function(e){var t=this;this.isLoading=!0,(0,M.gj)(e).then((function(){t.$emit("close","save")})).finally((function(){t.isLoading=!1}))},clearCacheParentTag:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.forEach((function(t){t._parentTag=void 0,e.clearCacheParentTag(t[e.dataTagTreeProps.children]||[])}))},cacheParentTag:function(e){var t=this;e.forEach((function(e){(e[t.dataTagTreeProps.children]||[]).forEach((function(a){a._parentTag=e,t.cacheParentTag([a])}))}))},fetchData:function(){var e=this;this.isLoading=!0,(0,M.Ch)({policyAggregateIds:[this.id],productId:this.productId}).then((function(t){var a=t.data;(a||[]).forEach((function(t){e.cacheParentTag(t.dataTagList)})),e.productList=a,e.handleProducClick(a[0])})).finally((function(){e.isLoading=!1}))},evil:function(e){var t=Function;return new t("return "+e)()}},created:function(){this.fetchData()}}),O=q,A=(0,y.Z)(O,N,$,!1,null,"517dc95d",null),R=A.exports,V=function(){var e=this,t=e._self._c;return t("div",[t("div",[t("el-row",{staticClass:"permission-box mb20"},[t("el-col",{staticClass:"item",attrs:{sm:12}},[t("div",{staticClass:"content"},[t("div",{staticClass:"menu-content"},[t("div",{staticClass:"box-head"},[t("span",{staticClass:"mr40"},[e._v("菜单列表 ")])]),t("div",{staticClass:"content"},[t("el-tree",{ref:"menuTree",attrs:{data:e.activeProduct.aggregateSet,"node-key":"id",props:e.menuTreeProps,"show-checkbox":!0,"default-expand-all":!0,"expand-on-click-node":!1,"check-strictly":e.isCheckStrictly,"default-checked-keys":e.selectedMenuIds},on:{"node-click":function(t){return e.activeMenu=t},check:function(t){return e.menuSelect(t,e.activeProduct)}}})],1)])])]),t("el-col",{staticClass:"item",attrs:{sm:12}},[t("div",{staticClass:"content"},[t("div",{staticClass:"menu-content"},[t("div",{staticClass:"box-head"},[t("span",{staticClass:"mr40"},[e._v(e._s(e.activeMenu.name))]),t("span",[e._v(" "+e._s(e.activeMenu.name?"-":"")+" 功能列表")])]),t("div",{staticClass:"content"},[e.activeMenu.buttons.length<=0?t("div",{staticClass:"no-data"},[t("span",{staticClass:"no-data__span text__nodata"},[e._v("暂无数据")])]):t("div",{staticClass:"buttons-box"},e._l(e.activeMenu.buttons,(function(a,i){return t("div",{key:i,staticClass:"buttons-box-item btn"},[t("el-button",{attrs:{type:a.selected?"primary":"default"},on:{click:function(t){return e.btnSelect(a,e.activeMenu)}}},[e._v(" "+e._s(a.cname)+" ")])],1)})),0)])])])])],1),t("div",{staticClass:"form-footer-btn",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("保存并返回")]),t("el-button",{on:{click:function(t){return e.$emit("close","cancel")}}},[e._v("取消")])],1)],1)])},j=[],U=(a(34553),a(69826),{name:"PermissionPolicy",props:{id:{type:Number,required:!0},productId:{type:[Number,String],default:0}},data:function(){return{radio:null,roleType:1,isLoading:!1,productList:[],activeProduct:this.genActivedPorduct(),menuTreeProps:{label:"name",children:"childAggregate"},activeMenu:this.genActivedMenu(),selectedMenuIds:[],isCheckStrictly:!1,apiServer:void 0,api:{}}},methods:{genActivedPorduct:function(){return{productName:"",aggregateSet:[]}},genActivedMenu:function(){return{name:"",buttons:[]}},getSelectedMenus:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.forEach((function(t){var i=t[e.menuTreeProps.children];!t.selected||i&&0!==i.length||a.push(t),i&&e.getSelectedMenus(i,a)})),a},handleProductChange:function(e){this.productList.forEach((function(t){t.productId!==e.productId&&(t.selected=0)}))},handleProducClick:function(e){var t=e.aggregateSet;this.activeProduct=e;var a=this.getSelectedMenus(t);this.selectedMenuIds=a.map((function(e){return e.id})),this.activeMenu=this.genActivedMenu()},subMenusSelect:function(e){var t=this,a=e.selected;e[this.menuTreeProps.children].forEach((function(e){e.selected=a,t.subMenusSelect(e)}))},parentMenuSelect:function(e){if(e._parentMenu){var t=e._parentMenu[this.menuTreeProps.children],a=t.some((function(e){return e.selected}));e._parentMenu.selected=Number(a),this.parentMenuSelect(e._parentMenu)}},menuSelect:function(e,t){e.selected=Number(!e.selected);var a=t.aggregateSet||[],i=this.getSelectedMenus(a);i.length>0&&(t.selected=1),this.isCheckStrictly||this.subMenusSelect(e),this.parentMenuSelect(e),this.selectedMenuIds=this.$refs.menuTree.getCheckedKeys()},btnSelect:function(e,t){e.selected=Number(!e.selected);var a=t.buttons||[],i=a.some((function(e){return e.selected})),n=this.selectedMenuIds.findIndex((function(e){return e===t.id}));i&&n<=-1&&this.selectedMenuIds.push(t.id),this.$refs.menuTree.setCheckedKeys(this.selectedMenuIds),t.selected||this.menuSelect(t,this.activeProduct)},handleSave:function(){var e=this,t=this.productList.slice(0,this.productList.length);t.forEach((function(t){e.clearCacheParentMenu(t.aggregateSet)})),this.saveData({policyId:this.id,camPolicyAggregateList:t})},saveData:function(e){var t=this;this.isLoading=!0,(0,M.Sy)(e).then((function(){t.$emit("close","save")})).finally((function(){t.isLoading=!1}))},clearCacheParentMenu:function(e){var t=this;e.forEach((function(e){e._parentMenu=void 0,t.clearCacheParentMenu(e[t.menuTreeProps.children])}))},cacheParentMenu:function(e){var t=this;e.forEach((function(e){e[t.menuTreeProps.children].forEach((function(a){a._parentMenu=e,t.cacheParentMenu([a])}))}))},fetchData:function(){var e=this;this.isLoading=!0,(0,M.SP)({policyAggregateIds:[this.id],productId:this.productId}).then((function(t){var a=t.data;(a||[]).forEach((function(t){e.cacheParentMenu(t.aggregateSet)})),e.productList=a,e.handleProductChange(a[0]),e.handleProducClick(a[0]);var i=e.productList.find((function(e){return e.selected}));i&&e.handleProducClick(i)})).finally((function(){e.isLoading=!1}))},evil:function(e){var t=Function;return new t("return "+e)()}},created:function(){this.fetchData()}}),z=U,J=(0,y.Z)(z,V,j,!1,null,"4cdae14a",null),K=J.exports,B={name:"AppRole",mixins:[P.Z],components:{CPagesCard:k,addRoleForm:E,PolicyDataTag:R,PermissionPolicy:K},props:{},data:function(){var e=this;return{titleMap:{editRole:"编辑应用角色",addRole:"添加应用角色",data:"角色数据权限",power:"角色权限管理"},dialogVisible:!1,pagesConfig:{listApi:M.JV,params:{},title:"应用角色",table:{header:[{width:100,label:"角色ID",prop:"id"},{label:"角色名称",prop:"policyName"},{label:"英文名称",prop:"policyEname"},{label:"归属业务",prop:"businessLineName"},{label:"描述",prop:"remark"},{label:"创建时间",prop:"createTime"},{label:"操作",width:200,align:"center",render:function(t,a){var i=a.row,n=[{text:"编辑",handle:"handleEdit"},{text:"权限管理",handle:"handlePower"}],s=[];return n.forEach((function(a){s.push(t("el-button",{attrs:{type:"text"},on:{click:function(){e[a.handle](i)}}},a.text))})),s}}],data:[]}},roleForm:{},editId:0,pageType:""}},computed:{},methods:{handlePower:function(e){this.dialogVisible=!0,this.pageType="power",this.editId=e.id},handleClose:function(){this.pageType="",this.dialogVisible=!1},handleData:function(e){this.dialogVisible=!0,this.pageType="data",this.editId=e.id},closeRole:function(e){this.dialogVisible=!1,this.pageType="","save"===e&&this.$refs.pages.getList()},handleEdit:function(e){this.pageType="editRole",this.editId=e.id,this.roleForm=JSON.parse(JSON.stringify(e)),this.dialogVisible=!0},addRole:function(){this.pageType="addRole",this.editId="",this.roleForm={businessUniqueIds:[]},this.dialogVisible=!0}},created:function(){this.$set(this.pagesConfig.params,"productUniqueId",this.uniqueId)}},X=B,Y=(0,y.Z)(X,i,n,!1,null,"459a1480",null),G=Y.exports},60838:function(e,t){"use strict";t["Z"]={computed:{productId:function(){return"85"},uniqueId:function(){return"1586923903278645248"},productKey:function(){return"hoderSaas"}}}},99534:function(e,t,a){"use strict";a.d(t,{Ch:function(){return l},Dz:function(){return n},JV:function(){return p},SP:function(){return u},Sy:function(){return d},XY:function(){return g},_d:function(){return r},fI:function(){return h},gj:function(){return c},s8:function(){return s},ul:function(){return o}});var i=a(56414);function n(e){return(0,i.Z)({method:"get",url:"auth/business/list",params:e})}function s(e){return(0,i.Z)({method:"get",url:"auth/camPolicy/detail",params:e})}function r(e){return(0,i.Z)({method:"post",url:"auth/camPolicy/save",data:e})}function o(e){return(0,i.Z)({method:"post",url:"auth/camPolicy/update",data:e})}function c(e){return(0,i.Z)({method:"post",url:"auth/camPolicyDataTag/save",data:e})}function l(e){return(0,i.Z)({method:"post",url:"auth/camPolicy/v2/policyDataTagList",data:e})}function u(e){return(0,i.Z)({method:"post",url:"auth/camPolicy/v2/policyDetail",data:e})}function d(e){return(0,i.Z)({method:"post",url:"auth/camPolicy/savePolicy",data:e})}function p(e){return(0,i.Z)({method:"get",url:"auth/camPolicy/list",params:e})}function h(e){return(0,i.Z)({method:"get",url:"auth/user/getUserErrorCount",isJSON:!1,params:e})}function g(e){return(0,i.Z)({method:"post",url:"auth/user/clearCache",isJSON:!1,params:e})}}}]);